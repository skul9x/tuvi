# Audit Report - 2026-01-29

## Summary
- ğŸ”´ Critical Issues: 1
- ğŸŸ¡ Warnings: 2
- ğŸŸ¢ Suggestions: 2

## ğŸ”´ Critical Issues (Cáº§n sá»­a ngay)
1. **Thiáº¿u chá»— nháº­p API Key trÃªn giao diá»‡n**
   - **MÃ´ táº£:** Hiá»‡n táº¡i App luÃ´ng mong Ä‘á»£i `GEMINI_API_KEY` cÃ³ sáºµn trong biáº¿n mÃ´i trÆ°á»ng há»‡ thá»‘ng (Environment Variable). NgÆ°á»i dÃ¹ng bÃ¬nh thÆ°á»ng táº£i app vá» sáº½ khÃ´ng biáº¿t cÃ¡ch setup, dáº«n Ä‘áº¿n tÃ­nh nÄƒng luáº­n giáº£i AI khÃ´ng cháº¡y.
   - **File:** `core/gemini_client.py`, `ui/main_window.py`
   - **Giáº£i phÃ¡p:** ThÃªm Ã´ nháº­p API Key trong `Settings` hoáº·c má»™t Dialog popup khi khá»Ÿi Ä‘á»™ng app láº§n Ä‘áº§u. LÆ°u key vÃ o file config (JSON/INI).

## ğŸŸ¡ Warnings (NÃªn lÆ°u Ã½)
1. **Giá»›i háº¡n chuyá»ƒn Ä‘á»•i ngÃ y Ã¢m lá»‹ch**
   - **MÃ´ táº£:** ThÆ° viá»‡n `lunardate` cÃ³ thá»ƒ bá»‹ lá»—i vá»›i cÃ¡c nÄƒm sinh quÃ¡ xa (trÆ°á»›c 1900 hoáº·c quÃ¡ xa trong tÆ°Æ¡ng lai).
   - **File:** `core/lunar.py`
   - **Giáº£i phÃ¡p:** ThÃªm `try-except` Ä‘á»ƒ báº¯t lá»—i khi nháº­p ngÃ y sinh "láº¡", hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i thÃ¢n thiá»‡n thay vÃ¬ crash app.

2. **UI bá»‹ treo nháº¹ khi tÃ­nh toÃ¡n náº·ng**
   - **MÃ´ táº£:** DÃ¹ AI cháº¡y luá»“ng riÃªng (Thread), nhÆ°ng viá»‡c tÃ­nh toÃ¡n `An Sao` vÃ  váº½ `Matplotlib` váº«n Ä‘ang cháº¡y á»Ÿ luá»“ng chÃ­nh (Main Thread). Náº¿u thuáº­t toÃ¡n phá»©c táº¡p hÆ¡n, App cÃ³ thá»ƒ bá»‹ khá»±ng 1 chÃºt.
   - **File:** `ui/main_window.py` (`on_analyze`)
   - **Giáº£i phÃ¡p:** Chuyá»ƒn cáº£ cá»¥m logic `An Sao` vÃ o Worker Thread luÃ´n.

## ğŸŸ¢ Suggestions (Tá»‘i Æ°u)
1. **Hardcoded Scoring Logic**
   - Äiá»ƒm sá»‘ cÃ¡c sao Ä‘ang fix cá»©ng trong `constants.py`. NÃªn tÃ¡ch ra file config riÃªng Ä‘á»ƒ dá»… cÃ¢n chá»‰nh sau nÃ y mÃ  khÃ´ng cáº§n sá»­a code.
2. **Logging**
   - ChÆ°a cÃ³ há»‡ thá»‘ng ghi log (file log). Náº¿u User gáº·p lá»—i, ráº¥t khÃ³ debug. NÃªn thÃªm `logging` module.

## Next Steps
Anh cÃ³ muá»‘n em "FIX ALL" (Sá»­a háº¿t) cÃ¡c lá»—i trÃªn khÃ´ng? Äáº·c biá»‡t lÃ  cÃ¡i API Key Input?
